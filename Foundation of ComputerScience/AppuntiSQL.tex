\documentclass[a4page, 11pt]{article}

\usepackage{graphicx}
\graphicspath{ {./img/} }
\usepackage[margin=0.65in]{geometry}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{enumitem}
\usepackage{booktabs}

%`` for quoting

\title{Foundations of Computer Science  - SQL}
\author{}
\date{}

\begin{document}

\maketitle

\section{Introduction to Relational DataBases}

The relational DB are organized in tables that can be linked together. A table in the relational model represents a relation. For example in the following database each row describes a single book:

\begin{table}[h]
	\centering
	\begin{tabular}{|l|l|}
		\hline
		
		\textbf{ISBN} & \textbf{Title}\\ 
		\hline
		978-1-449-30321-1 & Scaling MongoDB\\ 
		\hline
		978-1-491-93200-1 & Graph Databases\\ 
		\hline
		978-1-449-39041-9 & Cassandra: The Definitive Guide\\ 
		\hline
		007-709500-6 & Database Systems\\
		\hline
		
	\end{tabular}
	\caption{Some sample books}
\end{table}

The data in a relational model is organized into columns and each entry(cell) contains a \textbf{SINGLE} piece of data, so the main problem of relational model is to handle data with multiple elements in a single column for example a book with two authors.

The solution proposed by the relational model is to link two tables and to do so we need an identifier ID for each row.
Here is an example of two linked tables.

\begin{table}[h]
	\centering
	\begin{tabular}{|l|l|l|}
		\hline
		
		\textbf{book\_id} & \textbf{ISBN} & \textbf{Title}\\ 
		\hline
		1 & 978-1-449-30321-1 & Scaling MongoDB\\ 
		\hline
		2 & 978-1-491-93200-1 & Graph Databases\\ 
		\hline
		3 & 978-1-449-39041-9 & Cassandra: The Definitive Guide\\ 
		\hline
		4 & 007-709500-6 & Database Systems\\
		\hline
		
	\end{tabular}
	\caption{Books Table with ID}
\end{table}

\begin{table}[h]
	\centering
	\begin{tabular}{|l|l|l|}
		\hline
		
		\textbf{author\_id} & \textbf{Name} & \textbf{Surname}\\ 
		\hline
		1 & Ian & Robinson\\
		\hline
		2 & Kristina & Chodorow\\ 
		\hline
		3 & Riccardo & Torlone\\
		\hline
		4 & Paolo & Atzeni\\
		\hline
		5 & Stefano & Ceri\\
		\hline
		6 & Stefano & Paraboschi\\
		\hline
		7 & Eben & Hewitt\\
		\hline
		
	\end{tabular}
	\caption{Authors Table with ID}
\end{table}

To connect these two tables we use a ``relation'' or ``join'' table. In the example the ``join'' table is the following:
\pagebreak
\begin{table}[h]
	\centering
	\begin{tabular}{|l|l|}
		\hline
		
		\textbf{book\_id} & \textbf{author\_id} \\
		\hline
		2 & 1\\
		\hline
		3 & 7\\
		\hline
		1 & 2\\
		\hline
		4 & 4\\
		\hline
		4 & 5\\
		\hline
		4 & 6\\
		\hline
		4 & 3\\
		\hline
	\end{tabular}
	\caption{BookAuthors Table}
	\label{table:join}
\end{table}

In the Table ~\ref{table:join} we can see the need of using an ID to identify each row, so it can be referenced uniquely. 
In some cases we might not need a third table (join table): one of these cases is the ``One-to-Many" relationship. 
The One-to-Many relationship also requires that rows in tables have unique IDs, but unlike the join table used in Many-to-Many relationship, the table with the many side of data has a column reserved for the IDs of the one side of data.

The IDs used to uniquely identify the rows described in the tables are called ``Primary Keys''(PK). 
If this primary key is used in another table it is called ``Foreign Key''(FK) and it is usually not unique in the new table. The purpose of the foreign key is to link the two tables in one-to-many relationship.

Usually the primary key generation process is left to the RDBMS (it's safer this way), which automatically generates the key and usually it is an ordinary integer.
For the join tables, the primary key is a combination of the foreign keys. A primary key comprised of more than one attribute is called a ``Composite Primary key''(CPK).

\section{Introduction To SQL}
SQL stands for Structured Query Language and it is a standard language for querying and manipulating data. It is a very high-level programming language and it is very well optimized.


SQL is a:
\begin{itemize}[noitemsep]
	\item Data Definition Language (DDL):\newline
	 It defines relation \textit{schema} and creates/alters/deletes tables and their attributes.
	\item Data Manipulation Language (DML):\newline
	It Inserts/deletes/modifies tuples in tables and queries one or more tables.
\end{itemize}

A \textbf{relation} (or \textbf{table}) in SQL is a multiset of tuples having the attributes specified by the schema. Where a \textbf{multiset} is an unordered list (so multiple duplicates instances are allowed) and an \textbf{attribute} is a typed data entry present in each tuples in the relation and it must have an atomic type in standard SQL. The atomic types are:
\begin{itemize}
	\item Characters: CHAR(20), VARCHAR(50)
	\item Numbers: INT, BIGINT, SMALLINT, FLOAT
	\item Others: MONEY, DATETIME, etc.
\end{itemize}
A \textbf{tuple (row)} is a single entry in the table having the attributes specified by the schema.

The \textbf{schema} of a table is the table name, it's attributes and they types, a key is an attribute whose values are unique. A \textbf{key} is a minimal subset of attributes that acts as a unique identifier for tuples in a relation. A key is an implicit constraint on which tuples can be in the relation: so if two tuples agree on the same value of the key, then they must be the same tuples. 

If some information is missing or is not known SQL uses the NULL. To check if a value is NULL we cannot say value=NULL since it's unknown we need to use ``IS NULL'' command of SQL. SQL offers the possibility to constrain a column to be NOT NULL or supports other constraints such as maximum number of values per attributes.
It's thanks to the schema and constraints that the databases understand the semantics of the data.

\section{Constraints in SQL}




\end{document}
